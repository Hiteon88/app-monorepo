"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[13728],{13728:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ExportPrivateKeys});var n=r(324586),o=r(586330),a=r(514041),i=r(908867),s=r(578104),c=r(490343),l=r(222007),d=r(325809),u=r(575995),p=r(498356),y=r(911998),f=r(162616),b=r(625931),w=r(319357),k=r(16853),m=r(254491),x=r(491180),g=r(482407),h=r(714191),v=r(831085);function CopyPrivateKeysDialog({defaultValue:e,rawKeyContent:t,showCheckBox:r}){var n=(0,i.A)(),[s,l]=(0,a.useState)(e),d=(0,a.useCallback)((function(e){l(!!e)}),[]),u=(0,c.useClipboard)();return(0,v.jsxs)(v.Fragment,{children:[r?(0,v.jsx)(c.Stack,{pr:"$1",children:(0,v.jsx)(c.Checkbox,{value:s,onChange:d,label:n.formatMessage({id:m.ETranslations.global_private_key_copy_check})})}):null,(0,v.jsx)(c.Dialog.Footer,{onConfirmText:n.formatMessage({id:m.ETranslations.global_copy}),confirmButtonProps:{disabled:r&&!s},onConfirm:(0,o.A)((function*(){u.copyText(t)}))})]})}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ExportPrivateKeysPage({indexedAccount:e,account:t,accountName:r,title:n,exportType:h}){var C,j,{activeAccount:A}=(0,f.LH)({num:0}),T=(0,p.A)(),_=(0,i.A)(),E=(0,c.useMedia)(),[P,K]=(0,a.useState)(!0),O=(0,c.useClipboard)(),M=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isImportedAccount({accountId:t?.id}))}),[t,e]),S=(0,a.useMemo)((function(){return Boolean(t&&!e&&x.A.isWatchingAccount({accountId:t?.id}))}),[t,e]),I=!!e,{result:N=[]}=(0,y.yk)((0,o.A)((function*(){return M&&t?.createAtNetwork||S&&t?.createAtNetwork?[t?.createAtNetwork]:(yield l.A.serviceNetwork.getSupportExportAccountKeyNetworks({exportType:h})).map((function(e){return e.network.id}))})),[t?.createAtNetwork,h,M,S]),D=(0,a.useMemo)((function(){return M||S?t?.createAtNetwork||(0,b.V)().btc:A?.network?.id||(0,b.V)().btc}),[t?.createAtNetwork,A?.network?.id,M,S]),$=(0,c.useForm)({values:{networkId:D,deriveType:null!=(C=A?.deriveType)?C:void 0,rawKeyContent:""},mode:"onChange",reValidateMode:"onBlur"}),B=$.watch("networkId"),V=$.watch("deriveType"),F=$.watch("rawKeyContent"),z=(0,a.useCallback)((function(){$.setValue("rawKeyContent",""),$.clearErrors("rawKeyContent"),K(!0)}),[$]),q=(0,a.useCallback)((j=(0,o.A)((function*({accountId:e,indexedAccountId:t,networkId:n,deriveType:o}){if(z(),(t||e)&&n&&(!I||o))try{var a=yield l.A.serviceAccount.exportAccountKeysByType({indexedAccountId:t,accountId:e,networkId:n,deriveType:o||void 0,exportType:h,accountName:r});a&&$.setValue("rawKeyContent",a)}catch(e){var i;throw[w.d.PasswordPromptDialogCancel].includes(e?.className)||$.setError("rawKeyContent",null!=(i=k.Ay.toPlainErrorObject(e))?i:{message:"error"}),e}})),function(e){return j.apply(this,arguments)}),[r,h,$,I,z]),H=(0,s.YQ)(q,600),W=(0,a.useCallback)((0,o.A)((function*({noDebouncedCall:r}={}){z();var n=r?q:H;yield n({accountId:t?.id,indexedAccountId:e?.id,networkId:B||"",deriveType:V})})),[t?.id,V,q,H,e?.id,B,z]),Y=(0,a.useMemo)((function(){return[{iconName:P?"EyeOutline":"EyeOffOutline",onPress:(t=(0,o.A)((function*(){F||(yield W({noDebouncedCall:!0})),K(!P)})),function onPress(){return t.apply(this,arguments)})},{iconName:"Copy3Outline",onPress:(e=(0,o.A)((function*(){F||(yield W({noDebouncedCall:!0})),"privateKey"===h?function showCopyPrivateKeysDialog({title:e,description:t,defaultChecked:r,rawKeyContent:n,showCheckBox:o}){return c.Dialog.show({icon:"ErrorOutline",tone:"destructive",title:e,description:t,renderContent:(0,v.jsx)(CopyPrivateKeysDialog,{rawKeyContent:n,defaultValue:r,showCheckBox:o})})}({title:_.formatMessage({id:m.ETranslations.global_private_key_copy}),description:_.formatMessage({id:m.ETranslations.global_private_key_copy_information}),showCheckBox:!0,defaultChecked:!1,rawKeyContent:$.getValues("rawKeyContent")||""}):O.copyText($.getValues("rawKeyContent"))})),function onPress(){return e.apply(this,arguments)})}];var e,t}),[O,h,$,_,F,W,P]);(0,a.useEffect)((function(){B&&$.setValue("deriveType","")}),[$,B]),(0,a.useEffect)((function(){(0,g.Gb)(B,V),z()}),[V,B,z]);var G=(0,a.useMemo)((function(){var e="key";return"publicKey"===h&&(e=_.formatMessage({id:m.ETranslations.global_public_key})),"privateKey"===h&&(e=_.formatMessage({id:m.ETranslations.global_private_key})),e}),[h,_]);return(0,v.jsxs)(c.Page,{scrollEnabled:!0,safeAreaEnabled:!0,children:[(0,v.jsx)(c.Page.Header,{title:n}),(0,v.jsxs)(c.Page.Body,{p:"$4",children:[(0,v.jsxs)(c.Form,{form:$,children:[(0,v.jsx)(c.Form.Field,{label:_.formatMessage({id:m.ETranslations.global_network}),name:"networkId",disabled:M,children:(0,v.jsx)(d.YS,{disabled:M,editable:!M,networkIds:N})}),M||S?null:(0,v.jsx)(u.FB,{fieldName:"deriveType",networkId:B}),(0,v.jsx)(c.Form.Field,{label:G,name:"rawKeyContent",children:(0,v.jsx)(c.Input,{size:E.gtMd?"medium":"large",editable:!1,placeholder:"••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••••",secureTextEntry:P,addOns:Y,displayAsMaskWhenEmptyValue:!0})})]}),"privateKey"===h?(0,v.jsxs)(c.Stack,{py:"$4",children:[(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:m.ETranslations.faq_private_key})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:m.ETranslations.faq_private_key_desc})}),(0,v.jsx)(c.Stack,{h:"$4"}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$headingSm",children:_.formatMessage({id:m.ETranslations.faq_private_key_keep})}),(0,v.jsx)(c.SizableText,{color:"$textSubdued",size:"$bodyMd",children:_.formatMessage({id:m.ETranslations.faq_private_key_keep_desc})})]}):null,null]}),(0,v.jsx)(c.Page.Footer,{onConfirmText:_.formatMessage({id:m.ETranslations.global_done}),confirmButtonProps:{disabled:!1},onConfirm:(0,o.A)((function*(){T.popStack()}))})]})}function ExportPrivateKeys({route:e}){return(0,v.jsx)(d.b8,{enabledNum:[0],config:{sceneName:h.Zs.home,sceneUrl:""},children:(0,v.jsx)(ExportPrivateKeysPage,_objectSpread({},e.params))})}}}]);