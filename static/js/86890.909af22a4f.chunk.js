"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[86890],{657412:(e,r,t)=>{t.d(r,{Xp:()=>a.Xp,yZ:()=>useBrowserAction,Gd:()=>useBrowserBookmarkAction,cS:()=>useBrowserHistoryAction,AO:()=>useBrowserTabActions,AS:()=>a.AS,Do:()=>a.Do,pJ:()=>a.pJ,nD:()=>a.nD});var a=t(603614),o=t(586330),i=t(324586),n=t(946343),s=t.n(n),l=t(230414),u=t(929296),c=t(195309),d=t(972715),b=t(514041),p=t(490343),f=t(222007),y=t(262873),m=t(714178),v=t(971670),g=t(660015),h=t(254491),k=t(849726),w=t(558726),D=(t(663522),t(338117)),A=t(657355),W=t(482407),B=t(796151),T=t(42484);function ownKeys(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);r&&(a=a.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,a)}return t}function _objectSpread(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ownKeys(Object(t),!0).forEach((function(r){(0,i.A)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function _createSuper(e){var r=_isNativeReflectConstruct();return function _createSuperInternal(){var t,a=(0,d.A)(e);if(r){var o=(0,d.A)(this).constructor;t=Reflect.construct(a,arguments,o)}else t=a.apply(this,arguments);return(0,c.A)(this,t)}}function _isNativeReflectConstruct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(_isNativeReflectConstruct=function(){return!!e})()}function loggerForEmptyData(e,r){e&&0!==e.length||(w.U.discovery.browser.setTabsDataFunctionName(r),w.U.discovery.browser.tabsData(e))}var S={};var I={id:"home",url:"about:blank",title:"OneKey",canGoBack:!1,loading:!1,favicon:""},j=function(e){(0,u.A)(ContextJotaiActionsDiscovery,e);var r=_createSuper(ContextJotaiActionsDiscovery);function ContextJotaiActionsDiscovery(...e){var t,i,n,l,u,c,d,b,m;return(t=r.call(this,...e)).setDisplayHomePage=(0,a.q0)((function(e,r,t){r((0,a.QL)(),t)})),t.setBrowserDataReady=(0,a.q0)((function(e,r){r((0,a.lr)(),!0)})),t.buildWebTabs=(0,a.q0)((function(e,r,t){var{data:o,options:i}=t;if(e((0,a.lr)())||i?.isInitFromStorage){var n=e((0,a.cl)()),l=o;if(!Array.isArray(o))throw new Error("setWebTabsWriteAtom: payload must be an array");l&&l.length||(l=[]);var u=function buildWebTabData(e){var r={},t=[];return e.sort((function(e,r){return e.timestamp&&r.timestamp?e.timestamp-r.timestamp:0})),e.forEach((function(e){t.push(e.id),r[e.id]=e})),{data:e,keys:t,map:r}}(l);s()(u.keys,n.keys)&&!i?.forceUpdate||r((0,a.cl)(),{keys:u.keys,tabs:u.data}),r((0,a.GW)(),(function(){return u.map})),loggerForEmptyData(u.data,"buildWebTabs->saveToSimpleDB"),f.A.simpleDb.browserTabs.setRawData({tabs:u.data})}})),t.refreshTabs=(0,a.q0)((function(e,r){var{tabs:o}=e((0,a.cl)()),i=[...o];loggerForEmptyData(i,"refreshTabs"),t.buildWebTabs.call(r,{data:i,options:{forceUpdate:!0}})})),t.setCurrentWebTab=(0,a.q0)((function(e,r,o){var i=e((0,a.WL)());if(i!==o){t.pauseDappInteraction.call(r,i);var{tabs:n}=e((0,a.cl)()),s=n.findIndex((function(e){return e.id===o}));n.forEach((function(e){e.isActive=!1})),loggerForEmptyData([...n],"setCurrentWebTab"),t.buildWebTabs.call(r,{data:[...n]}),-1!==s?(n[s].isActive=!0,r((0,a.WL)(),o),t.resumeDappInteraction.call(r,o)):r((0,a.WL)(),"")}var l=e((0,a.QL)());o&&l&&t.setDisplayHomePage.call(r,!1),o||l||t.setDisplayHomePage.call(r,!0)})),t.addWebTab=(0,a.q0)((function(e,r,o){performance.now();var i,{tabs:n}=e((0,a.cl)());o.id&&o.id!==I.id||(o.id=(0,W.lk)()),o.timestamp=Date.now(),t.buildWebTabs.call(r,{data:[...n,o]}),t.setCurrentWebTab.call(r,null!=(i=o.id)?i:"");performance.now()})),t.addBlankWebTab=(0,a.q0)((function(e,r){t.addWebTab.call(r,_objectSpread(_objectSpread({},I),{},{isActive:!0}))})),t.setWebTabData=(0,a.q0)((function(e,r,o){var{tabs:i}=e((0,a.cl)()),n=i,s=n.findIndex((function(e){return e.id===o.id}));if(s>-1){var l=n[s];Object.keys(o).forEach((function(e){var r=e,t=o[r];if(void 0!==t&&t!==l[r]){if("title"===r&&!t)return;l[r]=t,"url"===r&&(l.timestamp=Date.now(),"about:blank"===t&&o.id&&(S[o.id]=l.timestamp))}})),n[s]=l,loggerForEmptyData(n,"setWebTabData"),t.buildWebTabs.call(r,{data:n})}})),t.closeWebTab=(0,a.q0)((function(e,r,o){delete g.O3[o];var{tabs:i}=e((0,a.cl)()),n=e((0,a.WL)()),s=i.findIndex((function(e){return e.id===o}));if(-1!==s){var l=i[s].id===n;if(i.splice(s,1),l){var u=s-1;if(u<0&&i.length>0&&(u=0),u>=0){var c=i[u];c.isActive=!0,t.setCurrentWebTab.call(r,c.id)}}}loggerForEmptyData([...i],"closeWebTab"),t.buildWebTabs.call(r,{data:[...i]})})),t.closeAllWebTabs=(0,a.q0)((function(e,r){var{tabs:o}=e((0,a.cl)()),i=e((0,a.WL)()),n=o.filter((function(e){return e.isPinned}));n.every((function(e){return e.id!==i}))&&t.setCurrentWebTab.call(r,null);var _loop=function(e){n.find((function(r){return r.id===e}))||delete g.O3[e]};for(var s of Object.getOwnPropertyNames(g.O3))_loop(s);loggerForEmptyData(n,"closeAllWebTabs"),t.buildWebTabs.call(r,{data:n})})),t.setPinnedTab=(0,a.q0)((function(e,r,a){t.setWebTabData.call(r,{id:a.id,isPinned:a.pinned,timestamp:Date.now()}),t.refreshTabs.call(r)})),t.syncBookmark=(0,a.q0)((function(e,r,o){var i=e((0,a.GW)());i&&Object.entries(i).forEach((function([,e]){e.url===o.url&&t.setWebTabData.call(r,{id:e.id,isBookmark:o.isBookmark})}))})),t.getBookmarkData=(0,a.q0)((0,o.A)((function*(){var e;return null!=(e=(yield f.A.simpleDb.browserBookmarks.getRawData())?.data)?e:[]}))),t.buildBookmarkData=(0,a.q0)((function(e,r,t){var{data:o,options:i}=t;if(e((0,a.lr)())||i?.isInitFromStorage){if(!Array.isArray(o))throw new Error("buildBookmarkData: payload must be an array");f.A.serviceDiscovery.setBrowserBookmarks(o)}})),t.addBrowserBookmark=(0,a.q0)((i=(0,o.A)((function*(e,r,a){if(a.url&&a.url!==I.url){var o=[...(yield t.getBookmarkData.call(r)).filter((function(e){return e.url!==a.url})),{url:a.url,title:a.title}];t.buildBookmarkData.call(r,{data:o}),t.syncBookmark.call(r,{url:a.url,isBookmark:!0}),f.A.serviceCloudBackup.requestAutoBackup()}})),function(e,r,t){return i.apply(this,arguments)})),t.removeBrowserBookmark=(0,a.q0)((n=(0,o.A)((function*(e,r,a){var o=(yield t.getBookmarkData.call(r)).filter((function(e){return e.url!==a}));t.buildBookmarkData.call(r,{data:o}),t.syncBookmark.call(r,{url:a,isBookmark:!1})})),function(e,r,t){return n.apply(this,arguments)})),t.modifyBrowserBookmark=(0,a.q0)((l=(0,o.A)((function*(e,r,a){if(a.url&&a.url!==I.url){var o=(yield t.getBookmarkData.call(r)).map((function(e){return e.url===a.url?_objectSpread(_objectSpread({},e),a):e}));t.buildBookmarkData.call(r,{data:o})}})),function(e,r,t){return l.apply(this,arguments)})),t.getHistoryData=(0,a.q0)((0,o.A)((function*(){var e;return null!=(e=(yield f.A.simpleDb.browserHistory.getRawData())?.data)?e:[]}))),t.buildHistoryData=(0,a.q0)((function(e,r,t){var{data:o,options:i}=t;if(e((0,a.lr)())||i?.isInitFromStorage){if(!Array.isArray(o))throw new Error("buildHistoryData: payload must be an array");f.A.simpleDb.browserHistory.setRawData({data:o})}})),t.addBrowserHistory=(0,a.q0)((u=(0,o.A)((function*(e,r,a){if(a.url&&a.url!==I.url){var o=(yield t.getHistoryData.call(r)).filter((function(e){return e.url!==a.url})),i={id:(0,W.lk)(),url:a.url,title:a.title,createdAt:Date.now()};t.buildHistoryData.call(r,{data:[i,...o]})}})),function(e,r,t){return u.apply(this,arguments)})),t.removeBrowserHistory=(0,a.q0)((c=(0,o.A)((function*(e,r,a){var o=(yield t.getHistoryData.call(r)).filter((function(e){return e.id!==a}));t.buildHistoryData.call(r,{data:o})})),function(e,r,t){return c.apply(this,arguments)})),t.removeAllBrowserHistory=(0,a.q0)((d=(0,o.A)((function*(e,r){t.buildHistoryData.call(r,{data:[]})})),function(e,r){return d.apply(this,arguments)})),t.getWebTabById=(0,a.q0)((function(e,r,t){var o=e((0,a.GW)());return o?.[t||""]})),t.gotoSite=(0,a.q0)((b=(0,o.A)((function*(e,r,{id:a,url:o,title:i,favicon:n,isNewWindow:s,isInPlace:l,userTriggered:u}){var c=t.getWebTabById.call(r,null!=a?a:"");if(o){var d=B.Ay.validateUrl(o);if(!d)return;if(u&&t.addBrowserHistory.call(r,{url:d,title:null!=i?i:""}),"StandardBrowser"===g.n5)return(0,v.C)(d);var b=c?.id,p=!d.startsWith("http")&&"about:blank"!==d,f="boolean"==typeof s?s:(s||!b||"home"===b||p)&&"MultiTabBrowser"===g.n5,y=yield t.getBookmarkData.call(r),m=y?.some((function(e){return e.url.includes(d)}));return f?t.addWebTab.call(r,{title:i,url:d,favicon:n,isBookmark:m}):t.setWebTabData.call(r,{id:b,url:d,title:i,favicon:n,isBookmark:m}),f||l||(0,g.T0)({url:d,tabId:b}),p&&"MultiTabBrowser"===g.n5&&b&&setTimeout((function(){t.closeWebTab.call(r,b)}),1e3),!0}return!1})),function(e,r,t){return b.apply(this,arguments)})),t.openMatchDApp=(0,a.q0)((m=(0,o.A)((function*(e,r,{dApp:a,webSite:o,isNewWindow:i,tabId:n}){return o?t.gotoSite.call(r,{id:n,url:o.url,title:o.title,favicon:yield f.A.serviceDiscovery.buildWebsiteIconUrl(o.url),isNewWindow:i,userTriggered:!0}):a?t.gotoSite.call(r,{id:n,url:a.url,title:a.name,dAppId:a.dappId,favicon:a.logo||a.originLogo,userTriggered:!0,isNewWindow:i}):void 0})),function(e,r,t){return m.apply(this,arguments)})),t.handleOpenWebSite=(0,a.q0)((function(e,r,{useCurrentWindow:o,tabId:i,navigation:n,webSite:s,dApp:l,shouldPopNavigation:u=!0}){var c=!o;if(!o&&e((0,a.$D)()))return void p.Toast.message({title:k.a.intl.formatMessage({id:h.ETranslations.explore_toast_tab_limit_reached},{number:"20"})});t.setDisplayHomePage.call(r,!1),t.openMatchDApp.call(r,{webSite:s,dApp:l,isNewWindow:c,tabId:i}),u&&n.switchTab(D.V4.Discovery)})),t.onNavigation=(0,a.q0)((function(e,r,{url:o,isNewWindow:i,isInPlace:n,title:s,favicon:l,canGoBack:u,canGoForward:c,loading:d,id:b,handlePhishingUrl:p}){var f=Date.now(),m=t.getWebTabById.call(r,null!=b?b:"");if(m){var v="string"==typeof o&&o!==m.url;if(o){var g=e((0,a.RY)()),{action:h}=B.Ay.parseDappRedirect(o,Array.from(g.keys()));if(h===B.Ay.EDAppOpenActionEnum.DENY)return w.U.discovery.browser.logRejectUrl(o),void p?.(o);if(B.Ay.isValidDeepLink(o))return void(0,y.q)({url:o})}if(v){if(m.timestamp&&f-m.timestamp<500)return;if(S[m.id]&&o!==I.url&&f-S[m.id]<1e3)return;t.gotoSite.call(r,{url:o,title:s,favicon:l,isNewWindow:i,isInPlace:n,id:m.id})}t.setWebTabData.call(r,{id:m.id,title:s,favicon:l,canGoBack:u,canGoForward:c,loading:d})}})),t.addUrlToPhishingCache=(0,a.q0)((function(e,r,t){try{var{origin:o}=new URL(t.url),i=e((0,a.RY)());i.set(o,!0),r((0,a.RY)(),i),window.desktopApi?.setAllowedPhishingUrls(Array.from(i.keys()))}catch{}})),t.updateDappActivityInteraction=(0,a.q0)((function(e,r,t){var o=t.id;o||(o=e((0,a.WL)()));var i=o?g.O3[o]:null;if(i){var n="pause"===t.type;n?g.ay:g.F;i.jsBridge&&(i.jsBridge.globalOnMessageEnabled=!n)}})),t.pauseDappInteraction=(0,a.q0)((function(e,r,a){t.updateDappActivityInteraction.call(r,{id:a,type:"pause"})})),t.resumeDappInteraction=(0,a.q0)((function(e,r,a){t.updateDappActivityInteraction.call(r,{id:a,type:"resume"})})),t.validateWebviewSrc=(0,a.q0)((function(e,r,t){if(!t)return T.i.InvalidUrl;var o=e((0,a.RY)()),{action:i}=B.Ay.parseDappRedirect(t,Array.from(o.keys()));return i===B.Ay.EDAppOpenActionEnum.DENY?(w.U.discovery.browser.logRejectUrl(t),T.i.NotSupportProtocol):B.Ay.containsPunycode(t)?(w.U.discovery.browser.logRejectUrl(t),T.i.InvalidPunycode):B.Ay.isValidDeepLink(t)?T.i.ValidDeeplink:T.i.Valid})),t}return(0,l.A)(ContextJotaiActionsDiscovery)}(m.x),x=(0,A.jq)((function(){return new j}));function useBrowserTabActions(){var e=x(),r=e.addWebTab.use(),t=e.addBlankWebTab.use(),a=e.buildWebTabs.use(),o=e.refreshTabs.use(),i=e.setWebTabData.use(),n=e.getWebTabById.use(),s=e.closeWebTab.use(),l=e.closeAllWebTabs.use(),u=e.setCurrentWebTab.use(),c=e.setPinnedTab.use(),d=e.setDisplayHomePage.use(),p=e.setBrowserDataReady.use();return(0,b.useRef)({addWebTab:r,addBlankWebTab:t,buildWebTabs:a,refreshTabs:o,setWebTabData:i,getWebTabById:n,closeWebTab:s,closeAllWebTabs:l,setCurrentWebTab:u,setPinnedTab:c,setDisplayHomePage:d,setBrowserDataReady:p})}function useBrowserBookmarkAction(){var e=x(),r=e.buildBookmarkData.use(),t=e.getBookmarkData.use(),a=e.addBrowserBookmark.use(),o=e.removeBrowserBookmark.use(),i=e.modifyBrowserBookmark.use();return(0,b.useRef)({buildBookmarkData:r,getBookmarkData:t,addBrowserBookmark:a,removeBrowserBookmark:o,modifyBrowserBookmark:i})}function useBrowserHistoryAction(){var e=x(),r=e.buildHistoryData.use(),t=e.getHistoryData.use(),a=e.addBrowserHistory.use(),o=e.removeBrowserHistory.use(),i=e.removeAllBrowserHistory.use();return(0,b.useRef)({buildHistoryData:r,getHistoryData:t,addBrowserHistory:a,removeBrowserHistory:o,removeAllBrowserHistory:i})}function useBrowserAction(){var e=x(),r=e.gotoSite.use(),t=e.openMatchDApp.use(),a=e.handleOpenWebSite.use(),o=e.onNavigation.use(),i=e.addUrlToPhishingCache.use(),n=e.pauseDappInteraction.use(),s=e.resumeDappInteraction.use(),l=e.validateWebviewSrc.use();return(0,b.useRef)({gotoSite:r,openMatchDApp:t,handleOpenWebSite:a,onNavigation:o,addUrlToPhishingCache:i,pauseDappInteraction:n,resumeDappInteraction:s,validateWebviewSrc:l})}},183259:(e,r,t)=>{t.d(r,{U:()=>s});var a=t(514041),o=t(17617),i=t(490343),n=t(831085);var s=(0,a.memo)((function BasicDiscoveryIcon({uri:e,size:r,borderRadius:t="$2"}){return e?(0,n.jsxs)(i.Image,{size:r,borderRadius:t,borderWidth:o.A.hairlineWidth,borderColor:"$borderSubdued",borderCurve:"continuous",children:[(0,n.jsx)(i.Image.Source,{source:{uri:decodeURIComponent(e)}}),(0,n.jsx)(i.Image.Fallback,{children:(0,n.jsx)(i.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%",children:(0,n.jsx)(i.Icon,{name:"GlobusOutline",width:"100%",height:"100%"})})}),(0,n.jsx)(i.Image.Loading,{children:(0,n.jsx)(i.Skeleton,{width:"100%",height:"100%"})})]}):(0,n.jsx)(i.Skeleton,{width:r,height:r,radius:"round"})}))},186890:(e,r,t)=>{t.r(r),t.d(r,{default:()=>W});var a=t(586330),o=t(514041),i=t(654266),n=t(908867),s=t(728046),l=t(17617),u=t(490343),c=t(222007),d=t(791088),b=t(498356),p=t(911998),f=t(657412),y=t(254491),m=t(558726),v=t(899035),g=t(338117),h=t(183259),k=t(564452),w=t(831085);function DappSearchModalSectionHeader({title:e,onMorePress:r}){var t=(0,n.A)();return(0,w.jsxs)(u.XStack,{px:"$5",pb:"$2",alignItems:"center",justifyContent:"space-between",children:[(0,w.jsx)(u.Heading,{size:"$headingMd",children:e}),(0,w.jsx)(u.Button,{variant:"tertiary",size:"medium",onPress:r,children:t.formatMessage({id:y.ETranslations.explore_see_all})})]})}var D="SEARCH_ITEM_ID",A=(0,w.jsx)(u.Image.Loading,{children:(0,w.jsx)(u.Skeleton,{width:"100%",height:"100%"})});const W=(0,k.k)((function SearchModal(){var e,r,t,k=(0,n.A)(),W=(0,b.A)(),B=(0,i.lq)(),{useCurrentWindow:T,tabId:S,url:I=""}=null!=(e=B.params)?e:{},[j,x]=(0,o.useState)(I),{handleOpenWebSite:P}=(0,f.yZ)().current,{serviceDiscovery:M}=c.A,{result:O,run:C}=(0,p.yk)((0,a.A)((function*(){return{bookmarkData:yield M.getBookmarkData({generateIcon:!0,sliceCount:8}),historyData:yield M.getHistoryData({generateIcon:!0,sliceCount:8,keyword:null!=j?j:void 0})}})),[M,j]),{result:H}=(0,p.yk)((0,a.A)((function*(){return yield M.searchDApp(j)})),[j,M]),R=(0,o.useRef)(!1);(0,i.xK)((function(){R.current&&(setTimeout((function(){C()}),300),R.current=!1)}));var[$,q]=(0,o.useState)([]);(0,o.useEffect)((function(){(0,a.A)((function*(){if(j){var e=yield c.A.serviceDiscovery.buildWebsiteIconUrl("https://google.com");q([{dappId:D,name:`${k.formatMessage({id:y.ETranslations.explore_search_placeholder})} "${j}"`,url:"",logo:e},...null!=H?H:[]])}else q([])}))()}),[j,H,k]);var E=Array.isArray($)&&$.length>0,U=(null!=(r=O?.bookmarkData)?r:[]).length>0&&!E,_=(null!=(t=O?.historyData)?t:[]).length>0,L=(0,o.useCallback)((function(e){return e.map((function(e,r){return(0,w.jsx)(d.c,{avatarProps:{src:e.logo||e.originLogo,loading:A,fallbackProps:{bg:"$bgStrong",justifyContent:"center",alignItems:"center",children:(0,w.jsx)(u.Icon,{name:"GlobusOutline"})},borderWidth:l.A.hairlineWidth,borderColor:"$borderSubdued"},renderItemText:function(){return(0,w.jsx)(u.RichSizeableText,{linkList:{a:{url:void 0,cursor:"auto"}},numberOfLines:1,size:"$bodyLgMedium",flex:1,children:e?.keyword?e.name.replace(new RegExp(e.keyword,"ig"),`<a>${e.keyword}</a>`):e.name})},subtitleProps:{numberOfLines:1},onPress:function(){e.dappId===D?(P({navigation:W,useCurrentWindow:T,tabId:S,webSite:{url:j,title:j}}),m.U.discovery.dapp.enterDapp({dappDomain:j,dappName:j,enterMethod:v.z.search})):(P({navigation:W,useCurrentWindow:T,tabId:S,dApp:e}),m.U.discovery.dapp.enterDapp({dappDomain:e.name,dappName:e.url,enterMethod:v.z.search}))},testID:`dapp-search${r}`},r)}))}),[P,W,j,S,T]);return(0,w.jsxs)(u.Page,{safeAreaEnabled:!0,children:[(0,w.jsx)(u.Page.Header,{headerTitle:k.formatMessage({id:y.ETranslations.explore_search_placeholder})}),(0,w.jsxs)(u.Page.Body,{children:[(0,w.jsx)(u.Stack,{mx:"$4",children:(0,w.jsx)(u.SearchBar,{autoFocus:!0,zIndex:20,selectTextOnFocus:!0,value:j,onSearchTextChange:x,placeholder:k.formatMessage({id:y.ETranslations.browser_search_dapp_or_enter_url}),onSubmitEditing:function(){P({navigation:W,useCurrentWindow:T,tabId:S,webSite:{url:j,title:j}}),m.U.discovery.dapp.enterDapp({dappDomain:j,dappName:j,enterMethod:v.z.addressBar})}})}),(0,w.jsxs)(u.ScrollView,{pt:"$2",pb:"$5",keyboardDismissMode:"none",keyboardShouldPersistTaps:"handled",onScrollBeginDrag:s.A.dismiss,children:[E?L($):null,U?(0,w.jsxs)(u.Stack,{children:[(0,w.jsx)(DappSearchModalSectionHeader,{title:k.formatMessage({id:y.ETranslations.explore_bookmarks}),onMorePress:function(){R.current=!0,W.pushModal(g.ry.DiscoveryModal,{screen:g.v1.BookmarkListModal})}}),(0,w.jsx)(u.XStack,{children:O?.bookmarkData?.map((function(e,r){return(0,w.jsxs)(u.Stack,{flexBasis:"25%",alignItems:"center",py:"$2",$gtMd:{flexBasis:"16.66666667%"},onPress:function(){P({navigation:W,useCurrentWindow:T,tabId:S,webSite:{url:e.url,title:e.title}}),m.U.discovery.dapp.enterDapp({dappDomain:e.url,dappName:e.title,enterMethod:v.z.bookmarkInSearch})},children:[(0,w.jsx)(h.U,{uri:e.logo,size:"$14",borderRadius:"$3"}),(0,w.jsx)(u.SizableText,{mt:"$2",px:"$2",size:"$bodyLgMedium",textAlign:"center",$gtMd:{size:"$bodyMdMedium"},numberOfLines:1,children:e.title})]},r)}))})]}):null,_?(0,w.jsxs)(u.Stack,{pt:"$5",children:[(0,w.jsx)(DappSearchModalSectionHeader,{title:k.formatMessage({id:y.ETranslations.explore_history}),onMorePress:function(){R.current=!0,W.pushModal(g.ry.DiscoveryModal,{screen:g.v1.HistoryListModal})}}),O?.historyData.map((function(e,r){return(0,w.jsx)(d.c,{avatarProps:{src:e.logo,loading:A,fallbackProps:{bg:"$bgStrong",justifyContent:"center",alignItems:"center",children:(0,w.jsx)(u.Icon,{name:"GlobusOutline"})},borderWidth:l.A.hairlineWidth,borderColor:"$borderSubdued"},title:e.title,titleMatch:e.titleMatch,titleProps:{numberOfLines:1},subtitle:e.url,subTitleMatch:e.urlMatch,subtitleProps:{numberOfLines:1},testID:`search-modal-${e.title.toLowerCase()}`,onPress:function(){P({navigation:W,useCurrentWindow:T,tabId:S,webSite:{url:e.url,title:e.title}}),m.U.discovery.dapp.enterDapp({dappDomain:e.url,dappName:e.title,enterMethod:v.z.historyInSearch})}},r)}))]}):null]})]})]})}))},660015:(e,r,t)=>{t.d(r,{F:()=>s,O3:()=>i,T0:()=>crossWebviewLoadUrl,ay:()=>n,n5:()=>o});var a=t(663522),o="StandardBrowser",i={};function getWebviewWrapperRef(e){var r=e?i[e]:null;return null!=r?r:null}function crossWebviewLoadUrl({url:e,tabId:r}){var t=getWebviewWrapperRef(r);a.Ay.isRuntimeBrowser?t?.innerRef?.loadURL(e):t?.innerRef?.loadUrl(e)}var n="\n(function(){\n  if (window.WebSocket) {\n    if (!window.$$onekeyWebSocketSend) {\n      window.$$onekeyWebSocketSend = window.WebSocket.prototype.send;\n    }\n    window.WebSocket.prototype.send = () => {};\n  }\n})()\n",s="\n(function(){\n  if (\n    window.WebSocket &&\n    window.$$onekeyWebSocketSend\n  ) {\n    window.WebSocket.prototype.send = window.$$onekeyWebSocketSend;\n  }\n})()\n"}}]);